<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Validation Scroll: A Market Physics Infographic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000428;
            color: #ffffff;
            background-image: radial-gradient(circle at top right, #004e92 0%, #000428 50%);
        }
        .glass-card {
            background: rgba(10, 15, 40, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 78, 146, 0.3);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center my-12">
            <h1 class="text-4xl md:text-6xl font-black tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-white">The Validation Scroll</h1>
            <p class="mt-4 text-lg md:text-xl text-blue-200 max-w-3xl mx-auto">An infographic visualizing a market physics engine engineered to profit from instability. Welcome to the punk-rock hedge fund. ü§ò</p>
        </header>

        <main class="space-y-16">

            <section id="philosophy">
                <h2 class="text-3xl font-bold text-center mb-8">From Cycles to Certainty: The Core Logic</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="glass-card rounded-lg p-6 text-center">
                        <div class="text-4xl mb-4">‚öõÔ∏è</div>
                        <h3 class="text-xl font-bold mb-2 text-blue-300">Astro-Gann Cycles</h3>
                        <p class="text-blue-100">The system treats market time as a deterministic 360¬∞ cycle, using planetary harmonics and time-price squaring as primary timing inputs, rooted in the work of W.D. Gann.</p>
                    </div>
                    <div class="glass-card rounded-lg p-6 text-center">
                        <div class="text-4xl mb-4">üìä</div>
                        <h3 class="text-xl font-bold mb-2 text-blue-300">Sector Rotation Law</h3>
                        <p class="text-blue-100">Utilizes Grace Morris's law of sector rotation, where the astrological sign of transiting planets like Jupiter and Saturn provides a strategic bias filter for favored or challenged sectors.</p>
                    </div>
                    <div class="glass-card rounded-lg p-6 text-center">
                        <div class="text-4xl mb-4">üî¨</div>
                        <h3 class="text-xl font-bold mb-2 text-blue-300">The P-Value Integrity Gate</h3>
                        <p class="text-blue-100">The system's edge is only trusted if its predictive power is statistically proven against 2000+ random market events. A P-Value &lt; 0.05 is required to scale risk.</p>
                    </div>
                </div>
            </section>

            <section id="physics-engine">
                <h2 class="text-3xl font-bold text-center mb-8">The Physics Engine: Kinetic Force &amp; Harmony</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="glass-card rounded-lg p-6">
                        <h3 class="text-2xl font-bold mb-4 text-blue-300">Gann Harmony: Squaring Price &amp; Time</h3>
                        <p class="text-blue-100 mb-4">A "Square Hit" occurs when time and price harmonize along a prescribed geometric ratio. The system validates W.D. Gann's theory by tracking the harmonic residue of price relative to a key pivot, anticipating major turning points when the residue approaches zero.</p>
                        <div class="chart-container">
                            <canvas id="gannChart"></canvas>
                        </div>
                    </div>
                    <div class="glass-card rounded-lg p-6">
                        <h3 class="text-2xl font-bold mb-4 text-blue-300">The Tap Response Index (TRI*): Measuring Shock</h3>
                         <p class="text-blue-100 mb-4">The TRI* measures the market's kinetic "jolt" following a signal. It calculates the Z-score (standard deviation) of shock across multiple channels, scaled by the structural importance of the event to create a single, actionable score.</p>
                        <div class="chart-container">
                            <canvas id="triChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="integrity-gate">
                <h2 class="text-3xl font-bold text-center mb-8">The Integrity Gate: Cunning Mercy Protocol</h2>
                <p class="text-center text-blue-200 max-w-3xl mx-auto mb-10">The system's risk is gated by a rigorous, multi-stage validation process. Only if all three gates are passed does the regime open for scaling risk. Otherwise, it defaults to a defensive, fade-the-noise posture.</p>
                <div class="w-full overflow-x-auto p-2">
                    <div class="glass-card rounded-lg p-8 flex flex-col md:flex-row items-center justify-around space-y-6 md:space-y-0 md:space-x-6 min-w-[700px]">
                        <div class="text-center">
                            <div class="p-4 bg-blue-900/50 border-2 border-blue-500 rounded-lg">Signal Input</div>
                        </div>
                        <div class="text-4xl text-blue-400 font-thin">‚Üí</div>
                        <div class="text-center">
                            <div class="p-4 border-2 border-blue-500 rounded-lg transform rotate-45">
                                <p class="transform -rotate-45">Structural W ‚â• 80?</p>
                            </div>
                        </div>
                        <div class="text-4xl text-blue-400 font-thin">‚Üí</div>
                        <div class="text-center">
                            <div class="p-4 border-2 border-blue-500 rounded-lg transform rotate-45">
                                <p class="transform -rotate-45">œÑ* CI Excludes 0?</p>
                            </div>
                        </div>
                        <div class="text-4xl text-blue-400 font-thin">‚Üí</div>
                        <div class="text-center">
                             <div class="p-4 border-2 border-blue-500 rounded-lg transform rotate-45">
                                <p class="transform -rotate-45">P-Value &lt; 0.05?</p>
                            </div>
                        </div>
                        <div class="text-4xl text-blue-400 font-thin">‚Üí</div>
                        <div class="text-center">
                            <div class="p-4 bg-green-900/50 border-2 border-green-500 rounded-lg">Regime: OPEN</div>
                            <div class="p-4 bg-red-900/50 border-2 border-red-500 rounded-lg mt-4">Regime: CLOSED</div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="output">
                <h2 class="text-3xl font-bold text-center mb-8">The Output: Live Signal Validation</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="glass-card rounded-lg p-6 flex flex-col items-center justify-center">
                        <h3 class="text-2xl font-bold mb-4 text-blue-300">Final TRI* Score</h3>
                        <p class="text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-white"><span id="triSigmaVal">2.87</span>œÉ</p>
                        <p class="text-blue-200 mt-2" id="triMeta">Measured at T+5 Minutes</p>
                    </div>
                     <div class="glass-card rounded-lg p-6">
                        <h3 class="text-2xl font-bold mb-4 text-blue-300">Action Protocol</h3>
                        <div class="space-y-4">
                            <div>
                                <p class="font-bold">Structural Weight (Wtap): <span class="text-blue-300"><span id="wtapVal">92</span>%</span></p>
                                <p class="text-sm text-blue-200">High-conviction DOE grant confirmation.</p>
                            </div>
                            <div>
                                <p class="font-bold">Kinetic Gain Factor: <span class="text-blue-300"><span id="kgfVal">0.96</span>x</span></p>
                                <p class="text-sm text-blue-200">System applies near-maximum risk scaling.</p>
                            </div>
                             <div>
                                <p class="font-bold">Trading Action: <span class="text-green-400" id="actionVal">SCALE-UP TERRITORY</span></p>
                                <p class="text-sm text-blue-200">High-conviction signal confirmed by high-magnitude physical shock. Conditions met for 1.0%‚Äì1.2% equity risk.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <footer class="text-center mt-16 py-8 border-t border-blue-500/20">
            <p class="text-blue-300">Infographic generated from "The Validation Scroll" source material.</p>
            <p class="text-sm text-blue-400/50 mt-2">This is for informational and illustrative purposes only and is not financial advice.</p>
        </footer>

    </div>

    <script>
        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            }
            return label;
        };

        const processLabels = (labels) => {
            return labels.map(label => {
                if (label.length > 16) {
                    const words = label.split(' ');
                    const lines = [];
                    let currentLine = '';
                    for (const word of words) {
                        if ((currentLine + word).length > 16) {
                            lines.push(currentLine.trim());
                            currentLine = '';
                        }
                        currentLine += word + ' ';
                    }
                    lines.push(currentLine.trim());
                    return lines;
                }
                return label;
            });
        };
        
        const chartDefaultOptions = {
            maintainAspectRatio: false,
            responsive: true,
            plugins: {
                legend: {
                    labels: {
                        color: '#cbd5e1'
                    }
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    }
                }
            },
            scales: {
                x: {
                    ticks: { color: '#94a3b8' },
                    grid: { color: 'rgba(71, 85, 105, 0.5)' }
                },
                y: {
                    ticks: { color: '#94a3b8' },
                    grid: { color: 'rgba(71, 85, 105, 0.5)' }
                }
            }
        };

        const gannData = {
            labels: ['-90d', '-60d', '-30d', 'Pivot', '+30d', '+60d', '+90d', '+120d'],
            datasets: [{
                label: 'Market Price',
                data: [100, 110, 105, 120, 145, 175, 210, 250],
                borderColor: '#4286f4',
                backgroundColor: 'rgba(66, 134, 244, 0.2)',
                fill: true,
                tension: 0.4
            }, {
                label: 'Gann Angle (1x1)',
                data: [null, null, null, 120, 150, 180, 210, 240],
                borderColor: '#ffffff',
                borderDash: [5, 5],
                fill: false,
                tension: 0,
                type: 'line'
            }]
        };
        new Chart(document.getElementById('gannChart'), {
            type: 'line',
            data: gannData,
            options: chartDefaultOptions
        });

        const triRawLabels = ['Price Shock (S_px)', 'Volume Shock (S_vol)', 'Gas Shock (S_gas)', 'Funding Shock (z_dF)', 'OI Shock (z_dOI)'];
        const triData = {
            labels: processLabels(triRawLabels),
            datasets: [{
                label: 'Baseline (1œÉ)',
                data: [1, 1, 1, 1, 1],
                fill: true,
                backgroundColor: 'rgba(255, 255, 255, 0.2)',
                borderColor: 'rgba(255, 255, 255, 0.5)',
                pointBackgroundColor: '#ffffff',
            }, {
                label: 'Impact Shock (Z-Score)',
                data: [2.1, 3.5, 1.8, 2.5, 2.9],
                fill: true,
                backgroundColor: 'rgba(66, 134, 244, 0.4)',
                borderColor: '#4286f4',
                pointBackgroundColor: '#4286f4',
            }]
        };
        new Chart(document.getElementById('triChart'), {
            type: 'radar',
            data: triData,
            options: {
                ...chartDefaultOptions,
                scales: {
                    r: {
                        angleLines: { color: 'rgba(71, 85, 105, 0.7)' },
                        grid: { color: 'rgba(71, 85, 105, 0.7)' },
                        pointLabels: {
                            color: '#cbd5e1',
                            font: {
                                size: 12
                            }
                        },
                        ticks: {
                            color: '#94a3b8',
                            backdropColor: 'rgba(0,0,0,0.5)'
                        }
                    }
                }
            }
        });

        async function loadRegime() {
          try {
            const res = await fetch('regime_snapshot.json', {cache:'no-cache'});
            if (!res.ok) return;
            const j = await res.json();
            const tri = document.getElementById('triSigmaVal'); if (tri) tri.textContent = (j.tri_sigma ?? 0).toFixed(2);
            const wt = document.getElementById('wtapVal'); if (wt) wt.textContent = Math.round(100*(j.wtap ?? 0));
            const kg = document.getElementById('kgfVal'); if (kg) kg.textContent = (j.kinetic_gain_factor ?? 0).toFixed(2);
            const act = document.getElementById('actionVal'); if (act) act.textContent = j.action || '‚Äî';
            const meta = document.getElementById('triMeta'); if (meta && j.timestamp) meta.textContent = 'Updated ' + new Date(j.timestamp).toLocaleString();
            
            if (act) {
                act.classList.remove('text-green-400', 'text-blue-300', 'text-red-400'); // Clear old classes
                const actionText = (j.action || '').toUpperCase();
                
                if (j.regime_open) {
                     act.classList.add('text-green-400');
                } else if (actionText.includes('DEFENSIVE') || actionText.includes('FADE')) {
                     act.classList.add('text-blue-300'); // Use blue for disciplined defensive action
                } else {
                     act.classList.add('text-red-400'); // Fallback for closed/error regime
                }
            }
            
          } catch(e) { /* silent */ }
        }
        loadRegime(); setInterval(loadRegime, 5000);
    </script>
</body>
</html>
