# Kinesthetic OS partner outreach automation

This guide packages the plan for a measurable outreach funnel into two pieces of
infrastructure you can ship immediately: a Supabase schema and a companion
Python helper script.

## 1. Create the Supabase tables

Run the following SQL migration in your Supabase project. It models inbound
leads, outbound emails, and responses, and adds permissive row-level security
policies that you can tighten later.

```sql
-- === CORE TABLES ===

-- Inbound partner leads (Typeform/Notion form submissions)
create table if not exists partner_leads (
  id bigint generated by default as identity primary key,
  created_at timestamptz default now(),
  org_name text,
  contact_name text,
  contact_email text,
  platform text,           -- Notion / Asana / ClickUp / Linear / Microsoft / Other
  role text,               -- VP Product, PM, Partnerships, Solutions Architect, etc.
  company_size text,       -- 1-10, 11-50, 51-200, 200+
  message text,            -- free text from form
  source text,             -- 'typeform' | 'notion' | 'manual'
  utm_campaign text,
  utm_medium text,
  utm_source text
);

-- Outbound outreach you send (for follow-up & accountability)
create table if not exists partner_outreach (
  id bigint generated by default as identity primary key,
  created_at timestamptz default now(),
  platform text,           -- target platform
  contact_email text,
  status text,             -- Draft | Sent | Replied | Won | Lost
  sent_at timestamptz,
  last_response_at timestamptz,
  notes text
);

-- Parsed/clustered replies → feeds your Liminal clustering pass
create table if not exists partner_responses (
  id bigint generated by default as identity primary key,
  created_at timestamptz default now(),
  platform text,
  contact_email text,
  sentiment text,          -- positive | neutral | negative | unknown
  key_terms jsonb,         -- ["API","Marketplace","White-label"]
  raw_text text,
  thread_ref text          -- email msg-id or helpdesk ticket id
);

-- === RLS (open for prototypes; harden later) ===
alter table partner_leads enable row level security;
alter table partner_outreach enable row level security;
alter table partner_responses enable row level security;

create policy "public read leads" on partner_leads for select using (true);
create policy "public insert leads" on partner_leads for insert with check (true);

create policy "public read outreach" on partner_outreach for select using (true);
create policy "public insert outreach" on partner_outreach for insert with check (true);
create policy "public update outreach" on partner_outreach for update using (true);

create policy "public read responses" on partner_responses for select using (true);
create policy "public insert responses" on partner_responses for insert with check (true);

-- OPTIONAL: helpful indexes
create index if not exists idx_partner_leads_created on partner_leads(created_at);
create index if not exists idx_partner_outreach_status on partner_outreach(status);
create index if not exists idx_partner_responses_platform on partner_responses(platform);
```

## 2. Configure environment variables

The helper script reads credentials from the environment. Set them in your shell
(or within a secrets manager such as Doppler or 1Password) before running the
commands below:

```bash
export SUPABASE_URL="https://your-project.supabase.co"
export SUPABASE_SERVICE_ROLE_KEY="supabase-service-role"
export OUTREACH_FROM_ADDRESS="you@company.com"
export OUTREACH_SMTP_HOST="smtp.sendgrid.net"
export OUTREACH_SMTP_PORT="465"
export OUTREACH_SMTP_USERNAME="apikey"
export OUTREACH_SMTP_PASSWORD="sg.xxxxxx"
```

## 3. Send tailored outreach emails

The `scripts/partner_outreach.py` helper wires the email send and Supabase log
into a single command. Provide the target platform, contact email, and subject
line, and optionally swap in a custom template.

```bash
python scripts/partner_outreach.py send "Notion" partnerships@notion.so \
  "Kinesthetic OS x Notion integrations" \
  --notes "Intro’d by Alex" \
  --template scripts/partner_outreach_template.txt
```

By default the script formats `scripts/partner_outreach_template.txt` with the
platform name and stores a `Sent` row inside `partner_outreach`.

## 4. Log responses programmatically

When a reply arrives (or you manually add a note from a call) use the
`log-response` subcommand. It accepts optional sentiment and key terms so you
can cluster feedback later.

```bash
python scripts/partner_outreach.py log-response "Notion" partnerships@notion.so \
  --sentiment positive \
  --key-terms "API Marketplace" \
  --raw-text "We’re interested, can you share the enterprise RFP?" \
  --thread-ref "<message-id@example.com>"
```

Each invocation writes to `partner_responses`, keeping your weekly clustering
pass accurate and timestamped.

---

With these two artifacts in place your outreach funnel is ready for automated
tracking and analytics. The Supabase dashboard offers quick filters for table
health, and you can connect Looker Studio or another BI tool to visualize the
status columns over time.
